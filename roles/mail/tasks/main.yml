---
- name: OSの各種設定
  ansible.builtin.import_tasks: config_os.yml

- name: パッケージインストール
  ansible.builtin.import_tasks: install.yml
  tags: install

- name: certbotのコンフィグ設定
  ansible.builtin.import_tasks: config_certbot.yml
  when: >
    certbot.domains is defined
    and dns_cloudflare.email is defined
    and dns_cloudflare.api_key is defined

- name: postfixのコンフィグ設定
  ansible.builtin.import_tasks: config_postfix.yml

- name: dovecotのコンフィグ設定
  ansible.builtin.import_tasks: config_dovecot.yml

- name: opendkimのコンフィグ設定
  ansible.builtin.import_tasks: config_opendkim.yml

- name: opendmarcのコンフィグ設定
  ansible.builtin.import_tasks: config_opendmarc.yml
